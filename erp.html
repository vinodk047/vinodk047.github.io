<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ERP System</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f9f9f9; }
    header { background: #2c3e50; padding: 15px; color: white; text-align: center; font-size: 20px; font-weight: bold; }
    nav { display: flex; justify-content: center; background: #34495e; }
    nav a { padding: 14px 20px; color: white; text-decoration: none; font-weight: bold; }
    nav a:hover { background: #1abc9c; }
    section { display: none; padding: 20px; background: white; margin: 20px auto; max-width: 600px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    section.active { display: block; }
    input, textarea { width: 100%; padding: 8px; margin: 8px 0; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #1abc9c; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
    button:hover { background: #16a085; }
  </style>
</head>
<body>
  <header>ERP System</header>
  <nav>
    <a href="#" onclick="showSection('invoice')">Invoices</a>
    <a href="#" onclick="showSection('po')">Purchase Order</a>
  </nav>

  <!-- Invoice Section -->
  <section id="invoice" class="active">
    <h2>Generate Invoice</h2>
    <input type="text" id="invNumber" placeholder="Invoice Number">
    <input type="text" id="invCustomer" placeholder="Customer Name">
    <input type="date" id="invDate">
    <textarea id="invItems" placeholder="Enter items (one per line: Item - Qty - Price)"></textarea>
    <button onclick="generateInvoicePDF()">Download Invoice PDF</button>
  </section>

  <!-- Purchase Order Section -->
  <section id="po">
    <h2>Generate Purchase Order</h2>
    <input type="text" id="poNumber" placeholder="PO Number">
    <input type="text" id="poVendor" placeholder="Vendor Name">
    <input type="date" id="poDate">
    <textarea id="poItems" placeholder="Enter items (one per line: Item - Qty - Price)"></textarea>
    <button onclick="generatePoPDF()">Download PO PDF</button>
  </section>

  <script>
    // Toggle sections
    function showSection(sectionId) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(sectionId).classList.add("active");
    }

    // Function to create PDF with table
    function generatePDF(title, number, party, date, items, filename) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Company logo placeholder (draw a rectangle)
      doc.setFillColor(52, 152, 219); // blue
      doc.rect(20, 10, 40, 20, 'F'); 
      doc.setTextColor(255,255,255);
      doc.setFontSize(12);
      doc.text("LOGO", 35, 23, {align: 'center'});

      doc.setTextColor(0,0,0);
      doc.setFontSize(18);
      doc.text(title, 140, 20);

      doc.setFontSize(12);
      doc.text(`Number: ${number}`, 20, 40);
      doc.text(`${title==="Invoice" ? "Customer" : "Vendor"}: ${party}`, 20, 50);
      doc.text(`Date: ${date}`, 20, 60);

      // Table headers
      doc.autoTable({
        startY: 70,
        head: [['Item', 'Qty', 'Price', 'Total']],
        body: items.map(line => {
          let [item, qty, price] = line.split(" - ").map(s => s.trim());
          let total = (parseFloat(qty) * parseFloat(price)) || 0;
          return [item || '', qty || '', price || '', total.toFixed(2)];
        }),
        theme: 'grid',
      });

      // Total amount
      let totalAmount = items.reduce((sum, line) => {
        let [_, qty, price] = line.split(" - ").map(s => s.trim());
        return sum + ((parseFloat(qty) || 0) * (parseFloat(price) || 0));
      }, 0);
      doc.text(`Total Amount: $${totalAmount.toFixed(2)}`, 20, doc.lastAutoTable.finalY + 10);

      doc.save(filename);
    }

    function generateInvoicePDF() {
      let number = document.getElementById("invNumber").value;
      let customer = document.getElementById("invCustomer").value;
      let date = document.getElementById("invDate").value;
      let items = document.getElementById("invItems").value.split("\n");
      generatePDF("Invoice", number, customer, date, items, `Invoice_${number}.pdf`);
    }

    function generatePoPDF() {
      let number = document.getElementById("poNumber").value;
      let vendor = document.getElementById("poVendor").value;
      let date = document.getElementById("poDate").value;
      let items = document.getElementById("poItems").value.split("\n");
      generatePDF("Purchase Order", number, vendor, date, items, `PO_${number}.pdf`);
    }
  </script>

  <!-- jsPDF AutoTable plugin -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</body>
</html>
